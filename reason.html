<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style/general.css">
    <link rel="stylesheet" href="style/reason.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Delius&family=Delius+Swash+Caps&family=Emilys+Candy&display=swap"
        rel="stylesheet">
</head>

<body>
    <section class="book">

        <h2 class="book-title">Reasons Why I Love You ü§ç</h2>

        <div class="book-container">

            <!-- PAGE -->
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">01 ‚Äî Click me</div>
                    <div class="page-back">
                        Because your clingy side!!!! ituu games bangettt.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">02 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you listen even when I talk nonsense.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">03 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you randomly become bocil manja.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">04 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you make simple days feel special.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">05 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you care in quiet ways.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">06 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you make me laugh at random things.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">07 ‚Äî Click me</div>
                    <div class="page-back">
                        Because your overthinking brain is cute.
                    </div>
                </div>
            </div>
            <div class="page">
                <div class="page-inner">
                    <div class="page-front">08 ‚Äî Click me</div>
                    <div class="page-back">
                        Because you make simple days feel special.
                    </div>
                </div>
            </div>
        </div>

        <p>MASIII BANYAK SEBENERNYAAA, TAPIII GAA AKAN MUATTTT DISINI SEMUAAA</p>

    </section>

    <audio id="bg-music" loop>
        <source src="stream.mp3" type="audio/mpeg">
    </audio>

    <script>
        const pages = document.querySelectorAll(".page");

        pages.forEach(page => {
            page.addEventListener("click", () => {
                page.classList.toggle("flip");
            });
        });

        document.addEventListener("DOMContentLoaded", () => {
            const music = document.getElementById("backgroundMusic");
            const btn = document.getElementById("music-toggle");

            // Ambil status & waktu terakhir
            const allowed = localStorage.getItem("musicAllowed");
            const savedTime = localStorage.getItem("musicTime");

            if (savedTime) {
                music.currentTime = parseFloat(savedTime);
            }

            if (allowed === "true") {
                music.play().catch(() => { });
                if (btn) btn.textContent = "üéµ";
            }

            // Simpan waktu setiap 1 detik
            setInterval(() => {
                if (!music.paused) {
                    localStorage.setItem("musicTime", music.currentTime);
                }
            }, 1000);

            // Klik pertama untuk aktifkan
            const enableMusic = () => {
                music.play().then(() => {
                    localStorage.setItem("musicAllowed", "true");
                    if (btn) btn.textContent = "üéµ";
                }).catch(() => { });
                document.removeEventListener("click", enableMusic);
            };

            document.addEventListener("click", enableMusic);

            // Toggle manual (kalau ada tombol)
            if (btn) {
                btn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    if (music.paused) {
                        music.play();
                        btn.textContent = "üéµ";
                        localStorage.setItem("musicAllowed", "true");
                    } else {
                        music.pause();
                        btn.textContent = "ü§ç";
                    }
                });
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
        integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
        crossorigin="anonymous"></script>
</body>

</html>